loco 프로젝트에서 소셜로그인으로 로그인을 하잖아

기존의 프로젝트를 관리자 용으로 사용을 하고

기존프로젝트를 복사해서 관리자 개발자 페이지의 영역을 뺀 것을 일반 유저가 사용하도록 분리를 할건데

이 때 두개의 도메인을 따로 발급받아서 사용할거야 서버는 하나를 공유하고

그렇게 된다면 카카오와 네이버 소셜로그인 승인을 도메인별로 따로따로 받아야함?

==================================================================================================================================

결론부터 말씀드리면, 도메인별로 소셜로그인 승인을 아예 처음부터 다시 받을 필요는 없습니다.

이미 운영 중인 기존 소셜로그인 애플리케이션(앱) 설정에 새로운 도메인을 추가하기만 하면 하나의 서버(Backend)로 두 개의 서비스를 모두 지원할 수 있습니다.

카카오와 네이버의 구체적인 설정 방법과 주의사항을 정리해 드릴게요.

1. 카카오 (Kakao Developers)
카카오는 하나의 앱에 여러 개의 도메인과 Callback URI를 등록하는 데 매우 관대합니다.

플랫폼 설정: [내 애플리케이션] > [플랫폼] > [Web] 메뉴에서 사이트 도메인에 새로 발급받은 일반 유저용 도메인을 추가하세요. (최대 10개까지 등록 가능)

Redirect URI 설정: [카카오 로그인] > [Redirect URI]에 새 도메인 기반의 콜백 주소를 추가합니다.

예: https://admin.loco.com/oauth/callback, https://user.loco.com/oauth/callback

서버 처리: 서버는 공용이므로, 어느 도메인에서 요청이 왔는지에 따라 로그인 성공 후 리다이렉트 시킬 주소만 분기 처리하면 됩니다.

2. 네이버 (Naver Developers)
네이버는 카카오보다 설정이 조금 더 까다롭지만, 역시 추가 도메인 등록이 가능합니다.

서비스 URL: [내 애플리케이션] > [API 설정] > [로그인 오픈 API 서비스 환경]에서 서비스 URL을 등록합니다. (최대 2개까지 가능하므로 관리자/유저 도메인 두 개를 다 넣으실 수 있습니다.)

Callback URL: 하단의 Callback URL 항목 옆의 + 버튼을 눌러 새 도메인의 콜백 주소를 추가하세요. (PC/모바일 웹 합쳐서 최대 10개)

주의사항: 서비스 URL에 등록되지 않은 도메인에서 로그인을 시도하면 오류가 발생하므로 반드시 두 도메인 모두 등록되어야 합니다.

💡 개발 시 고려해야 할 핵심 포인트
1. Backend의 Redirect URI 처리
소셜로그인 요청을 보낼 때 redirect_uri 파라미터를 함께 보냅니다. 서버에서는 현재 요청이 들어온 도메인이 어디인지 확인하여 해당 도메인에 맞는 redirect_uri를 인증 서버(카카오/네이버)에 전달해야 합니다.

2. 쿠키 및 세션 공유 문제
완전 다른 도메인일 경우: admin-loco.com과 user-loco.com처럼 도메인 자체가 다르면 브라우저 정책상 쿠키 공유가 되지 않습니다. 유저가 관리자 페이지에서 로그인했어도 유저 페이지로 넘어가면 다시 로그인해야 할 수 있습니다.

서브 도메인일 경우: admin.loco.com과 www.loco.com 형태라면 쿠키의 Domain 설정을 .loco.com으로 지정하여 세션을 공유할 수 있습니다.

3. 유저 구분 로직
서버가 하나이므로, 로그인한 유저가 '관리자' 권한이 있는지 '일반 유저' 권한이 있는지 체크하는 로직이 필수입니다. 일반 유저가 관리자 도메인으로 접근했을 때 API 레벨에서 차단하는 권한 제어(RBAC)를 꼼꼼히 구현해 주세요.

추가로 궁금한 점이 있으신가요? 예를 들어, "서로 다른 두 도메인 간에 로그인 상태를 유지(SSO)하고 싶다"거나 "특정 도메인으로 들어온 유저만 관리자로 로그인하게 제한하고 싶다"는 등의 구체적인 요구사항이 있다면 알려주세요! 구체적인 코드 예시나 로직을 짜 드릴 수 있습니다.